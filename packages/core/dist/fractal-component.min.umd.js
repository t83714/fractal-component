!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","react","prop-types"],e):e(t.FractalComponent={},t.React,t.PropTypes)}(this,function(t,e,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t,e){return t(e={exports:{}},e.exports),e.exports}var o,l=i(function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}t.exports=e});o="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var a,c,h=("function"==typeof(c=o.Symbol)?c.observable?a=c.observable:(a=c("observable"),c.observable=a):a="@@observable",a),d={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function y(t,e,n){var r;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(y)(t,e)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var i=t,o=e,a=[],c=a,s=!1;function u(){c===a&&(c=a.slice())}function f(){if(s)throw Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function l(e){if("function"!=typeof e)throw Error("Expected the listener to be a function.");if(s)throw Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var n=!0;return u(),c.push(e),function(){if(n){if(s)throw Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");n=!1,u();var t=c.indexOf(e);c.splice(t,1)}}}function p(t){if(!function(t){if("object"!==(void 0===t?"undefined":v(t))||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(s)throw Error("Reducers may not dispatch actions.");try{s=!0,o=i(o,t)}finally{s=!1}for(var e=a=c,n=0;n<e.length;n++){(0,e[n])()}return t}return p({type:d.INIT}),(r={dispatch:p,subscribe:l,getState:f,replaceReducer:function(t){if("function"!=typeof t)throw Error("Expected the nextReducer to be a function.");i=t,p({type:d.REPLACE})}})[h]=function(){var t,n=l;return(t={subscribe:function(t){if("object"!==(void 0===t?"undefined":v(t))||null===t)throw new TypeError("Expected the observer to be an object.");function e(){t.next&&t.next(f())}return e(),{unsubscribe:n(e)}}})[h]=function(){return this},t},r}function m(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}var s=function(t){return"@@redux-saga/"+t},f=function(t){return t=s(t),"function"==typeof Symbol?Symbol(t):t},p=function(t){return t=s(t),"function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for(t):t},w=f("CANCEL_PROMISE"),g=f("CHANNEL_END"),b=f("CHANNEL_END"),x=f("IO"),S=f("MATCH"),E=f("MULTICAST"),O=f("SAGA_ACTION"),T=f("SELF_CANCELLATION"),L=f("TASK"),_=f("TASK_CANCEL"),A=p("LOCATION");function N(){return(N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var k=function(t){return function(){return t}}(!0),M=function(){},C=function(t){return t},j=Object.prototype.hasOwnProperty;function P(t,e){return D.notUndef(t)&&j.call(t,e)}var D={undef:function(t){return null==t},notUndef:function(t){return null!=t},func:function(t){return"function"==typeof t},number:function(t){return"number"==typeof t},string:function(t){return"string"==typeof t},array:Array.isArray,object:function(t){return t&&!D.array(t)&&"object"==typeof t},promise:function(t){return t&&D.func(t.then)},iterator:function(t){return t&&D.func(t.next)&&D.func(t.throw)},iterable:function(t){return t&&D.func(Symbol)?D.func(t[Symbol.iterator]):D.array(t)},task:function(t){return t&&t[L]},observable:function(t){return t&&D.func(t.subscribe)},buffer:function(t){return t&&D.func(t.isEmpty)&&D.func(t.take)&&D.func(t.put)},pattern:function(t){return t&&(D.string(t)||D.symbol(t)||D.func(t)||D.array(t))},channel:function(t){return t&&D.func(t.take)&&D.func(t.close)},stringableFunc:function(t){return D.func(t)&&P(t,"toString")},symbol:function(t){return!!t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype},multicast:function(t){return D.channel(t)&&t[E]}},F={assign:function(t,e){for(var n in e)P(e,n)&&(t[n]=e[n])}};function z(t,e){var n=t.indexOf(e);n<0||t.splice(n,1)}var U={from:function(t){var e=Array(t.length);for(var n in t)P(t,n)&&(e[n]=t[n]);return e}};function R(t){var e=!1;return function(){e||(e=!0,t())}}function I(e,n){var r;void 0===n&&(n=!0);var t=new Promise(function(t){r=setTimeout(function(){return t(n)},e)});return t[w]=function(){return clearTimeout(r)},t}function G(t){return void 0===t&&(t=0),function(){return++t}}var q=G(),B=function(t){throw t},H=function(t){return{value:t,done:!0}};function Y(t,e,n){void 0===e&&(e=B),void 0===n&&(n="iterator");var r={meta:{name:n},next:t,throw:e,return:H,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function K(t,e,n){void 0===n&&(n=""),"undefined"==typeof window?console.log("redux-saga "+t+": "+e+"\n"+(n&&n.stack||n)):console[t](e,n)}var X=function(t){return Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+t+"\n")},$=function(e){return function(t){return e(Object.defineProperty(t,O,{value:!0}))}},J={isEmpty:k,put:M,take:M};function V(n,r){void 0===n&&(n=10);var i=Array(n),o=0,a=0,c=0,s=function(t){i[a]=t,a=(a+1)%n,o++},e=function(){if(0!=o){var t=i[c];return i[c]=null,o--,c=(c+1)%n,t}},u=function(){for(var t=[];o;)t.push(e());return t};return{isEmpty:function(){return 0==o},put:function(t){var e;if(o<n)s(t);else switch(r){case 1:throw Error("Channel's Buffer overflow!");case 3:i[a]=t,c=a=(a+1)%n;break;case 4:e=2*n,i=u(),a=o=i.length,c=0,n=i.length=e,s(t)}},take:e,flush:u}}var W=function(t){return V(t,4)},Q=[],Z=0;function tt(t){try{nt(),t()}finally{rt()}}function et(t){Q.push(t),Z||(nt(),it())}function nt(){Z++}function rt(){Z--}function it(){var t;for(rt();!Z&&void 0!==(t=Q.shift());)tt(t)}var ot=function(t){return function(e){return t.some(function(t){return ft(t)(e)})}},at=function(e){return function(t){return e(t)}},ct=function(e){return function(t){return t.type===e+""}},st=function(e){return function(t){return t.type===e}},ut=function(){return k};function ft(t){var e="*"===t?ut:D.string(t)?ct:D.array(t)?ot:D.stringableFunc(t)?ct:D.func(t)?at:D.symbol(t)?st:null;if(null===e)throw Error("invalid pattern: "+t);return e(t)}var lt={type:b},pt=function(t){return t&&t.type===b};function ht(n){void 0===n&&(n=W());var r=!1,i=[];function o(){if(r&&i.length)throw X("Cannot have a closed channel with pending takers");if(i.length&&!n.isEmpty())throw X("Cannot have pending takers with non empty buffer")}return{take:function(t){o(),r&&n.isEmpty()?t(lt):n.isEmpty()?(i.push(t),t.cancel=function(){return z(i,t)}):t(n.take())},put:function(t){if(o(),!r){if(!i.length)return n.put(t);var e=i[0];i.splice(0,1),e(t)}},flush:function(t){o(),r&&n.isEmpty()?t(lt):t(n.flush())},close:function(){if(o(),!r&&(r=!0,i.length)){var t=i;i=[];for(var e=0,n=t.length;e<n;e++)(0,t[e])(lt)}}}}function dt(t,e){void 0===e&&(e=J);var n,r=!1,i=ht(e),o=function(){D.func(n)&&n(),i.close()};if(n=t(function(t){if(pt(t))return o(),void(r=!0);i.put(t)}),!D.func(n))throw Error("in eventChannel: subscribe should return a function to unsubscribe");return n=R(n),r&&n(),{take:i.take,flush:i.flush,close:o}}function vt(){var t,i=!1,o=[],a=o,n=function(){a===o&&(a=o.slice())},c=function(){i=!0;for(var t=o=a,e=0;e<t.length;e++){(0,t[e])(lt)}a=[]};return(t={})[E]=!0,t.put=function(t){if(!i)if(pt(t))c();else for(var e=o=a,n=0;n<e.length;n++){var r=e[n];r[S](t)&&(r.cancel(),r(t))}},t.take=function(t,e){void 0===e&&(e=ut),i?t(lt):(t[S]=e,n(),a.push(t),t.cancel=R(function(){n(),z(a,t)}))},t.close=c,t}function yt(){var t=vt(),e=t.put;return t.put=function(t){t[O]?e(t):et(function(){return e(t)})},t}function gt(t,e){return t+"?"+e}function mt(t){return t[A]}function bt(t){var e=t.name,n=t.location;return n?e+"  "+gt(n.fileName,n.lineNumber):e}var wt=function(t,n){return void 0===n&&(n=function(t){return t}),t.reduce(function(t,e){return t.concat(n(e))},[])};function xt(t){var e,n,r,i=t[0],o=t.slice(1),a=i.effect?(e=mt(i.effect))?e.code+"  "+gt(e.fileName,e.lineNumber):"":null;return["The above error occurred in task "+bt(i.meta)+(a?" \n when executing effect "+a:"")].concat(o.map(function(t){return"    created by "+bt(t.meta)}),[(n=t,r=wt(n,function(t){return t.cancelledTasks}),r.length?["Tasks cancelled due to error:"].concat(r).join("\n"):"")]).join("\n")}var St={done:!0,value:void 0},Et={};function Ot(t,e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o,a,c={done:!1,value:Lt(t)},s=function(t){return o=t};return function(r,t,e){var i,o=t;function n(t,e){if(o===Et)return St;if(e)throw o=Et,e;i&&i(t);var n=r[o]();return i=n[2],(o=n[0])===Et?St:n[1]}return Y(n,function(t){return n(null,t)},e)}({q1:function(){return["q2",c,s]},q2:function(){return o===lt?[Et]:["q1",(t=o,{done:!1,value:Ft.apply(void 0,[e].concat(r,[t]))})];var t}},"q1","takeEvery("+(D.channel(a=t)?"channel":D.stringableFunc(a)?a+"":D.func(a)?a.name:a+"")+", "+e.name+")")}var _t="TAKE",At="PUT",kt="ALL",Ct="CALL",jt="FORK",Pt="CANCEL",Rt="SELECT",It="CANCELLED",Tt=function(t,e){var n;return(n={})[x]=!0,n[t]=e,n};function Lt(t,e){if(void 0===t&&(t="*"),D.pattern(t))return Tt(_t,{pattern:t});if(D.multicast(t)&&D.notUndef(e)&&D.pattern(e))return Tt(_t,{channel:t,pattern:e});if(D.channel(t))return Tt(_t,{channel:t});throw Error("take(patternOrChannel): argument "+t+" is not valid channel or a valid pattern")}function Nt(t,e){return D.undef(e)&&(e=t,t=null),Tt(At,{channel:t,action:e})}function Mt(t,e,n){var r=null;if(D.array(e)){r=e[0],e=e[1]}else if(e.fn){r=e.context,e=e.fn}return r&&D.string(e)&&D.func(r[e])&&(e=r[e]),{context:r,fn:e,args:n}}function Dt(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Tt(Ct,Mt(0,t,n))}function Ft(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Tt(jt,Mt(0,t,n))}function zt(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 1<e.length?(r=e.map(function(t){return zt(t)}),Tt(kt,r)):Tt(Pt,e[0]||T);var r}function Ut(t,e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Ft.apply(void 0,[Ot,t,e].concat(r))}var Gt=Dt.bind(null,I),qt=function(e){return function(t){return t&&t[x]&&t[e]}},Bt={take:qt(_t),put:qt(At),all:qt(kt),race:qt("RACE"),call:qt(Ct),cps:qt("CPS"),fork:qt(jt),join:qt("JOIN"),cancel:qt(Pt),select:qt(Rt),actionChannel:qt("ACTION_CHANNEL"),cancelled:qt(It),flush:qt("FLUSH"),getContext:qt("GET_CONTEXT"),setContext:qt("SET_CONTEXT")};function Ht(){return(Ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Yt(t){return{name:t.name||"anonymous",location:mt(t)}}var Kt={toString:function(){return g}},Xt={toString:function(){return _}};function $t(i,x,S,E,t,O,r,_,e){void 0===S&&(S=M),void 0===E&&(E=M),void 0===t&&(t={}),void 0===O&&(O={}),void 0===r&&(r=0);var c=O.sagaMonitor,o=O.onError,s=O.middleware,n=O.logger||K,u=function(t){n("error",t),t.sagaStack&&n("error",t.sagaStack)},A=Object.create(t),f=null,a=[];g.cancel=M;var l,p,h,d,v,k=(l=r,p=_,d=e,(v={})[L]=!((h=i)._deferredEnd=null),v.id=l,v.meta=p,v.toPromise=function(){if(h._deferredEnd)return h._deferredEnd.promise;var t=function(t){void 0===t&&(t={});var n=N({},t),e=new Promise(function(t,e){n.resolve=t,n.reject=e});return n.promise=e,n}();return h._deferredEnd=t,h._isRunning||(h._isAborted?t.reject(h._error):t.resolve(h._result)),t.promise},v.cont=d,v.joiners=[],v.cancel=y,v.isRunning=function(){return h._isRunning},v.isCancelled=function(){return h._isCancelled},v.isAborted=function(){return h._isAborted},v.result=function(){return h._result},v.error=function(){return h._error},v.setContext=function(t){F.assign(A,t)},v),C={meta:_,cancel:function(){C.isRunning&&!C.isCancelled&&(C.isCancelled=!0,g(Xt))},isRunning:!0},j=function(r,e,i){var o,a=[],c=!1;function s(t){e(),n(),i(t,!0)}function t(n){a.push(n),n.cont=function(t,e){c||(z(a,n),n.cont=M,e?s(t):(n===r&&(o=t),a.length||(c=!0,i(o))))}}function n(){c||(c=!0,a.forEach(function(t){t.cont=M,t.cancel()}),a=[])}return t(r),{addTask:t,cancelAll:n,abort:s,getTasks:function(){return a},getTaskNames:function(){return a.map(function(t){return t.meta.name})}}}(C,function(){a.push.apply(a,j.getTaskNames())},m);function y(){i._isRunning&&!i._isCancelled&&(i._isCancelled=!0,j.cancelAll(),m(Xt))}return e&&(e.cancel=y),i._isRunning=!0,g(),k;function g(t,e){if(!C.isRunning)throw Error("Trying to resume an already finished generator");try{var n;e?n=i.throw(t):t===Xt?(C.isCancelled=!0,g.cancel(),n=D.func(i.return)?i.return(Xt):{done:!0,value:Xt}):n=t===Kt?D.func(i.return)?i.return():{done:!0}:i.next(t),n.done?(C.isMainRunning=!1,C.cont&&C.cont(n.value)):P(n.value,r,"",g)}catch(t){C.isCancelled&&u(t),C.isMainRunning=!1,C.cont(t,!0)}}function m(e,n){var t,r;i._isRunning=!1,n?(r={meta:_,effect:f,cancelledTasks:a},"object"==typeof(t=e)&&(void 0===t.sagaStack&&Object.defineProperty(t,"sagaStack",{value:[],writable:!0,enumerable:!1}),t.sagaStack.push(r)),k.cont||(e.sagaStack&&(e.sagaStack=xt(e.sagaStack)),e instanceof Error&&o?o(e):u(e)),i._error=e,i._isAborted=!0,i._deferredEnd&&i._deferredEnd.reject(e)):(i._result=e,i._deferredEnd&&i._deferredEnd.resolve(e)),k.cont&&k.cont(e,n),k.joiners.forEach(function(t){return t.cb(e,n)}),k.joiners=null}function b(t,e,n){var r,i,o,a,c,s,u,f,l,p,h,d,v,y,g,m,b,w;return D.promise(t)?R(t,n):D.iterator(t)?I(t,e,_,n):(r=Bt.take(t))?function(t,e){var n=t.channel,r=void 0===n?x:n,i=t.pattern,o=t.maybe,a=function(t){t instanceof Error?e(t,!0):!pt(t)||o?e(t):e(Kt)};try{r.take(a,D.notUndef(i)?ft(i):null)}catch(t){return void e(t,!0)}e.cancel=a.cancel}(r,n):(r=Bt.put(t))?(g=n,m=(y=r).channel,b=y.action,w=y.resolve,void et(function(){var t;try{t=(m?m.put:S)(b)}catch(t){return void g(t,!0)}w&&D.promise(t)?R(t,g):g(t)})):(r=Bt.all(t))?function(r,e,i){var o=Object.keys(r);if(!o.length)return void i(D.array(r)?[]:{});var a,c=0,s={},u={};o.forEach(function(n){var t=function(t,e){a||(e||pt(t)||t===Kt||t===Xt?(i.cancel(),i(t,e)):(s[n]=t,++c===o.length&&(a=!0,i(D.array(r)?U.from(Ht({},s,{length:o.length})):s))))};t.cancel=M,u[n]=t}),i.cancel=function(){a||(a=!0,o.forEach(function(t){return u[t].cancel()}))},o.forEach(function(t){return P(r[t],e,t,u[t])})}(r,e,n):(r=Bt.race(t))?(l=e,p=n,v={},(d=Object.keys(f=r)).forEach(function(i){var t=function(t,e){if(!h)if(e)p.cancel(),p(t,!0);else if(!pt(t)&&t!==Kt&&t!==Xt){var n;p.cancel(),h=!0;var r=((n={})[i]=t,n);p(D.array(f)?[].slice.call(Ht({},r,{length:d.length})):r)}};t.cancel=M,v[i]=t}),p.cancel=function(){h||(h=!0,d.forEach(function(t){return v[t].cancel()}))},void d.forEach(function(t){h||P(f[t],l,t,v[t])})):(r=Bt.call(t))?function(t,e,n){var r,i=t.context,o=t.fn,a=t.args;try{r=o.apply(i,a)}catch(t){return void n(t,!0)}return D.promise(r)?R(r,n):D.iterator(r)?I(r,e,Yt(o),n):n(r)}(r,e,n):(r=Bt.cps(t))?function(t,n){var e=t.context,r=t.fn,i=t.args;try{var o=function(t,e){return D.undef(t)?n(e):n(t,!0)};r.apply(e,i.concat(o)),o.cancel&&(n.cancel=function(){return o.cancel()})}catch(t){return void n(t,!0)}}(r,n):(r=Bt.fork(t))?function(t,e,n){var r=t.fn,i=t.detached,o=function(t){var e,n,r,i,o=t.context,a=t.fn,c=t.args;if(D.iterator(a))return a;try{e=a.apply(o,c)}catch(t){n=t}return D.iterator(e)?e:Y(n?function(){throw n}:(i={done:!1,value:e},function(t){return r?{done:!0,value:t}:(r=!0,i)}))}({context:t.context,fn:r,args:t.args}),a=(c=o,s=r,c.isSagaIterator?{name:c.meta.name}:Yt(s));var c,s;try{nt();var u=$t(o,x,S,E,A,O,e,a,i?null:M);i?n(u):o._isRunning?(j.addTask(u),n(u)):o._error?j.abort(o._error):n(u)}finally{it()}}(r,e,n):(r=Bt.join(t))?function(t,e){if(t.isRunning()){var n={task:k,cb:e};e.cancel=function(){return z(t.joiners,n)},t.joiners.push(n)}else t.isAborted()?e(t.error(),!0):e(t.result())}(r,n):(r=Bt.cancel(t))?function(t,e){t===T&&(t=k);t.isRunning()&&t.cancel();e()}(r,n):(r=Bt.select(t))?function(t,e){var n=t.selector,r=t.args;try{var i=n.apply(void 0,[E()].concat(r));e(i)}catch(t){e(t,!0)}}(r,n):(r=Bt.actionChannel(t))?(a=n,c=(o=r).pattern,s=ht(o.buffer),u=ft(c),x.take(function t(e){pt(e)||x.take(t,u),s.put(e)},u),void a(s)):(r=Bt.flush(t))?void r.flush(n):(r=Bt.cancelled(t))?void n(!!C.isCancelled):(r=Bt.getContext(t))?void n(A[r]):(r=Bt.setContext(t))?(i=n,F.assign(A,r),void i()):n(t)}function P(n,t,e,r){void 0===e&&(e="");var i,o=q();function a(t,e){i||(i=!0,r.cancel=M,c&&(e?c.effectRejected(o,t):c.effectResolved(o,t)),e&&(f=n),r(t,e))}c&&c.effectTriggered({effectId:o,parentEffectId:t,label:e,effect:n}),a.cancel=M,r.cancel=function(){if(!i){i=!0;try{a.cancel()}catch(t){u(t)}a.cancel=M,c&&c.effectCancelled(o)}},D.func(s)?s(function(t){return b(t,o,a)})(n):b(n,o,a)}function R(t,e){var n=t[w];D.func(n)?e.cancel=n:D.func(t.abort)&&(e.cancel=function(){return t.abort()}),t.then(e,function(t){return e(t,!0)})}function I(t,e,n,r){$t(t,x,S,E,A,O,e,n,r)}}function Jt(t){void 0===t&&(t={});var e=t.context,i=void 0===e?{}:e,o=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])<0&&(i[n]=t[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)e.indexOf(n=a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,["context"]),a=o.sagaMonitor,c=o.logger,s=o.onError,u=o.effectMiddlewares;function f(t){var e=t.getState,n=t.dispatch,r=yt();return r.put=(o.emitter||C)(r.put),f.run=function(t,e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=e.apply(void 0,r),a=t.channel,c=void 0===a?yt():a,s=t.dispatch,u=t.getState,f=t.context,l=t.sagaMonitor,p=t.logger,h=t.effectMiddlewares,d=t.onError,v=q();l&&(l.effectTriggered=l.effectTriggered||M,l.effectResolved=l.effectResolved||M,l.effectRejected=l.effectRejected||M,l.effectCancelled=l.effectCancelled||M,l.actionDispatched=l.actionDispatched||M,l.effectTriggered({effectId:v,root:!0,parentEffectId:0,effect:{root:!0,saga:e,args:r}}));var y=h&&m.apply(void 0,h),g=$t(o,c,$(s),u,f,{sagaMonitor:l,logger:p,onError:d,middleware:y},v,Yt(e));return l&&l.effectResolved(v,g),g}.bind(null,{context:i,channel:r,dispatch:n,getState:e,sagaMonitor:a,logger:c,onError:s,effectMiddlewares:u}),function(n){return function(t){a&&a.actionDispatched&&a.actionDispatched(t);var e=n(t);return r.put(t),e}}}return f.run=function(){throw Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},f.setContext=function(t){F.assign(i,t)},f}var Vt="fractal-component",Wt="3.0.2",Qt=Symbol("@@"+Vt+"/NAMESPACED"),Zt=!1;process&&process;var te=null,ee=function(){return null===te&&(te="object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)),te},ne=null,re=function(){if(null!==ne)return ne;if(!ee())return ne={pid:null,macAddr:"",macAddrInt:null};var t="",e=null,n=null;try{var r,i=require("os").networkInterfaces();for(r in i){for(var o=i[r],a=o.length,c=0;c<a;c++)if(o[c].mac&&"00:00:00:00:00:00"!=o[c].mac){t=o[c].mac;break}if(""!==t)break}n=process&&process.pid?process.pid:null,e=t?parseInt(t.replace(/\:|\D+/gi,"")):null,isNaN(e)&&(e=null)}catch(t){}return ne={pid:n,macAddr:t,macAddrInt:e}},ie=null,oe=function(t){var e=re(),n=e.pid,r=e.macAddrInt;n=he.number(n)&&n?n.toString(36):"",r=he.number(r)&&r?r.toString(36):"";var i=Date.now(),o=ie||i;return(t||"")+r+n+(ie=o<i?i:o+1).toString(36)},ae=function(){return Vt},ce=function(t,e,n){void 0===e&&(e="log"),void 0===n&&(n=""),"undefined"==typeof window?console.log("fractal-component "+e+": "+t+"\n"+(n&&n.stack||n)):console[e](t,n)},se=function(t){return t?he.string(t)?t.trim():(t+"").trim():""},ue=function(t){return function(){return t}},fe=ue(!0),le=ue(!1),pe=function(){},he=l({},D,{bool:function(t){return"boolean"==typeof t},action:function(t){return D.object(t)&&D.symbol(t.type)},namespacedAction:function(t){return he.action(t)&&t[Qt]}}),de=Object.freeze({isInNode:ee,getMachineInfo:re,uniqid:oe,getPackageName:ae,getPackageVersion:function(){return Wt},isDevMode:function(){return Zt},log:ce,trim:se,konst:ue,kTrue:fe,kFalse:le,noop:pe,identity:function(t){return t},is:he}),ve=function(){function t(t){if(this.cwd=me(t),-1!=this.cwd.indexOf("*"))throw Error("`cwd` cannot contains `*`");-1!=this.cwd.indexOf(".")&&(this.cwd=this.compressPath(this.cwd))}var e=t.prototype;return e.getLastSegment=function(){var t=this.cwd.lastIndexOf("/");return t<this.cwd.length-1?this.cwd.substring(t+1):""},e.compressPath=function(t,e){void 0===e&&(e=!0),he.string(t)&&(t=[t]);var n=[];return t.map(function(t){return t.trim()}).forEach(function(t){if(-1!=t.indexOf("*"))throw Error("Failed to resolve path: path segments cannot contain `*`");t.split("/").forEach(function(t){switch(t=se(t)){case"":case".":break;case"..":n.length?n.pop():e||n.push("..");break;default:n.push(t)}})}),n.join("/")},e.resolve=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=[this.cwd].concat(e);return this.compressPath(r)},e.convertNamespacedAction=function(t,e){var n;if(!he.object(t))throw Error("Tried to dispatch action in invalid type: "+typeof t);if(!he.symbol(t.type))throw Error("action.type cannot be "+typeof t.type+" and must be a Symbol");var r=me(e),i=!1;r.length&&"*"===r[r.length-1]&&(i=!0,r=me(r.substring(0,r.length-1)));var o=this.resolve(r),a=l({},t,((n={})[Qt]=!0,n.isMulticast=i,n.currentSenderPath=this.cwd,n.currentDispatchPath=o,n.currentComponentId=this.getLastSegment(),n));return a.senderPath||(a.senderPath=a.currentSenderPath),a.dispatchPath||(a.dispatchPath=a.currentDispatchPath),a.componentId||(a.componentId=a.currentComponentId),a},t}(),ye=function(){function t(){this.paths=[],this.dataStore={}}var e=t.prototype;return e.add=function(t,e){return void 0===e&&(e=void 0),ge(t),t=me(t),-1!=this.paths.indexOf(t)?null:(this.paths.push(t),he.notUndef(e)&&(this.dataStore[t]=e),t)},e.getPathData=function(t){var e=this.dataStore[t];return e||{}},e.setPathData=function(t,e){this.dataStore[t]=e},e.mergePathData=function(t,e){this.dataStore[t]=he.object(this.dataStore[t])?Object.assign({},this.dataStore[t],e):e},e.removePathData=function(t){delete this.dataStore[t]},e.foreach=function(e){var n=this;Object.keys(this.dataStore).forEach(function(t){return e(n.dataStore[t],t)})},e.map=function(e){var n=this;return Object.keys(this.dataStore).map(function(t){return e(n.dataStore[t],t)})},e.searchPathByPathData=function(e){var n=this;if(!he.func(e))throw Error("searchPathByPathData require function as parameter!");return Object.keys(this.dataStore).find(function(t){return e(n.dataStore[t])})},e.remove=function(e){ge(e),e=me(e),this.paths=this.paths.filter(function(t){return t!==e}),delete this.dataStore[e]},e.exist=function(t){return-1!=this.paths.indexOf(t)},e.isAllowedMulticast=function(t,e){var n=this.getPathData(t).allowedIncomingMulticastActionTypes;if(!n)return!1;if(he.string(n)&&"*"===n)return!0;if(he.symbol(n))return n===e;if(!he.array(n))throw Error("PathRegistry.isAllowedMulticast: invalid `allowedIncomingMulticastActionTypes` option type. ");return-1!=n.indexOf(e)},e.searchDispatchPaths=function(n){var r=this;if(!0!==n[Qt])throw Error("PathRegistry: cannot searchDispatchPaths for a non-namespaced action.");var i=n.currentDispatchPath;return n.isMulticast?this.paths.filter(function(t){if(0!=t.indexOf(i+"/")&&t!==i)return!1;if("*"!==r.getPathData(t).allowedIncomingMulticastActionTypes)return r.isAllowedMulticast(t,n.type);var e=(r.dataStore[t]?r.dataStore[t]:{}).localPathPos;return!he.number(e)||i.length-1>=e-2}):this.exist(i)?[i]:[]},t}();function ge(t){if(-1!=t.indexOf("*"))throw Error("path cannot contain `*`")}function me(t,e){return void 0===e&&(e=!1),t=se(t),e&&(t=t.toLowerCase()),"/"===t[0]&&(t=1===t.length?"":t.substring(1)),"/"===t[t.length-1]&&(t=1===t.length?"":t.substring(0,t.length-1)),t}var be=i(function(t){t.exports=function(){var e=Object.prototype.toString;function o(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function f(t){if(!t)return!0;if(p(t)&&0===t.length)return!0;if("string"==typeof t)return!1;for(var e in t)if(o(t,e))return!1;return!0}function l(t){return e.call(t)}var p=Array.isArray||function(t){return"[object Array]"===e.call(t)};function h(t){var e=parseInt(t);return""+e===t?e:t}function t(i){i=i||{};var a=function(n){return Object.keys(a).reduce(function(t,e){return"create"===e||"function"==typeof a[e]&&(t[e]=a[e].bind(a,n)),t},{})};function c(t,e){return i.includeInheritedProps||"number"==typeof e&&Array.isArray(t)||o(t,e)}function s(t,e){if(c(t,e))return t[e]}function u(t,e,n,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return u(t,e.split(".").map(h),n,r);var i=e[0],o=s(t,i);return 1===e.length?(void 0!==o&&r||(t[i]=n),o):(void 0===o&&(t[i]="number"==typeof e[1]?[]:{}),u(t[i],e.slice(1),n,r))}return a.has=function(t,e){if("number"==typeof e?e=[e]:"string"==typeof e&&(e=e.split(".")),!e||0===e.length)return!!t;for(var n=0;n<e.length;n++){var r=h(e[n]);if(!("number"==typeof r&&p(t)&&r<t.length||(i.includeInheritedProps?r in Object(t):o(t,r))))return!1;t=t[r]}return!0},a.ensureExists=function(t,e,n){return u(t,e,n,!0)},a.set=function(t,e,n,r){return u(t,e,n,r)},a.insert=function(t,e,n,r){var i=a.get(t,e);r=~~r,p(i)||a.set(t,e,i=[]),i.splice(r,0,n)},a.empty=function(t,e){var n,r;if(!f(e)&&null!=t&&(n=a.get(t,e))){if("string"==typeof n)return a.set(t,e,"");if("boolean"==typeof(o=n)||"[object Boolean]"===l(o))return a.set(t,e,!1);if("number"==typeof n)return a.set(t,e,0);if(p(n))n.length=0;else{if("object"!=typeof(i=n)||"[object Object]"!==l(i))return a.set(t,e,null);for(r in n)c(n,r)&&delete n[r]}var i,o}},a.push=function(t,e){var n=a.get(t,e);p(n)||a.set(t,e,n=[]),n.push.apply(n,Array.prototype.slice.call(arguments,2))},a.coalesce=function(t,e,n){for(var r,i=0,o=e.length;i<o;i++)if(void 0!==(r=a.get(t,e[i])))return r;return n},a.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return a.get(t,e.split("."),n);var r=h(e[0]),i=s(t,r);return void 0===i?n:1===e.length?i:a.get(t[r],e.slice(1),n)},a.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(f(e))return t;if("string"==typeof e)return a.del(t,e.split("."));var n=h(e[0]);return c(t,n)?1!==e.length?a.del(t[n],e.slice(1)):(p(t)?t.splice(n,1):delete t[n],t):t},a}var n=t();return n.create=t,n.withInheritedProps=t({includeInheritedProps:!0}),n}()}),we={saga:null,initState:{},reducer:null,namespace:null,namespacePrefix:null,componentId:null,persistState:!1,allowedIncomingMulticastActionTypes:null,isServerSideRendering:!1},xe=ae(),Se=Symbol("COMPONENT_MANAGER_LOCAL_KEY"),Ee=function(){function t(t,e,n){this.componentInstance=t,this.options=l({},we,e),this.appContainer=n,this.store=n.store,this.isInitialized=!1,this.isDestroyed=!1,this.initCallback=pe,this.destroyCallback=pe,this.storeListener=function(){var t=be.get(this.store.getState(),this.fullPath.split("/"));if(t===this.componentInstance.state)return;this.setState(t)}.bind(this),this.storeListenerUnsubscribe=null,this.managingInstance=t,this.displayName=function(t){try{return t.constructor.displayName||t.constructor.name||"Component"}catch(t){return"Compon"}}(this.managingInstance);var r=function(t){if(!t)return"";{if("function"!=typeof t)return t+"";try{var e=t.bind(this,this.displayName,this.managingInstance)();return e||""}catch(t){return console.log("Failed to retrieve setting via executing generating function: "+t.getMessage()),""}}}.bind(this);if(this.namespace=me(r(this.options.namespace)),-1!=this.namespace.indexOf("*"))throw Error("`Namespace` cannot contain `*`.");if(!this.namespace)throw Error("Missing Component `namespace`: Component `namespace` must be specified.");if(this.isAutoComponentId=!1,this.componentId=me(r(this.options.componentId)),-1!=this.componentId.indexOf("/")||-1!=this.componentId.indexOf("*"))throw Error("`Component ID` cannot contain `/` or `*`.");if(this.componentId||(this.isAutoComponentId=!0,this.componentId=oe()),this.componentInstance.props&&this.componentInstance.props.namespacePrefix&&(this.namespacePrefix=me(r(this.componentInstance.props.namespacePrefix))),this.namespacePrefix||(this.namespacePrefix=me(r(this.options.namespacePrefix))),-1!=this.namespacePrefix.indexOf("*"))throw Error("`namespacePrefix` cannot contain `*`.");this.isServerSideRendering=this.options.isServerSideRendering,this.persistState=this.options.persistState,this.fullNamespace=function(){var t=[];this.namespacePrefix&&t.push(this.namespacePrefix);this.namespace&&t.push(this.namespace);return t.join("/")}.bind(this)(),this.fullPath=function(){var t=[];this.fullNamespace&&t.push(this.fullNamespace);return t.push(this.componentId),t.join("/")}.bind(this)(),this.fullLocalPath=function(){var t=[];this.namespace&&t.push(this.namespace);return t.push(this.componentId),t.join("/")}.bind(this)(),this.allowedIncomingMulticastActionTypes=this.options.allowedIncomingMulticastActionTypes,function(){var t=this.managingInstance.state;t||(t=this.options.initState);t||(t={});this.initState=l({},t)}.apply(this)}var e=t.prototype;return e.enhanceComponentInstance=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.initCallback=t),e&&(this.destroyCallback=e),this.componentInstance.state=this.initState,this.setState=this.componentInstance.setState.bind(this.componentInstance),this.componentInstance.setState=function(){throw Error("This component is managed by `"+xe+"`. You should dispatch action to mutate component state.")},this.storeListenerUnsubscribe=this.store.subscribe(this.storeListener),(this.componentInstance[Se]=this).isServerSideRendering?this.init():function(){var t=this.managingInstance.componentWillUnmount?this.managingInstance.componentWillUnmount:pe;this.managingInstance.componentDidMount=function(t){this.init(),t&&"function"==typeof t&&t.apply(this.managingInstance)}.bind(this,this.managingInstance.componentDidMount?this.managingInstance.componentDidMount:pe),this.managingInstance.componentWillUnmount=function(t){t&&"function"==typeof t&&t.apply(this.managingInstance);this.destroy()}.bind(this,t)}.apply(this)},e.dispatch=function(t,e){void 0===e&&(e="");var n=new ve(this.fullPath).convertNamespacedAction(t,e),r=this.appContainer.actionRegistry.findNamespaceByActionType(n.type);return r?n.namespace=r:ce("Cannot locate namespace for Action `"+newAction.type+"`: `"+newAction.type+"` needs to be registered otherwise the action won't be serializable."),this.store.dispatch(n)},e.init=function(){this.isInitialized||this.isDestroyed||(this.initCallback(this),this.isInitialized=!0)},e.destroy=function(){this.isDestroyed=!0,this.isInitialized&&(this.destroyCallback(this),this.storeListenerUnsubscribe&&(this.storeListenerUnsubscribe(),this.storeListenerUnsubscribe=null),this.appContainer=null,this.store=null,this.isInitialized=!1)},t}();var Oe={isServerSideRendering:!1},_e=function(){function t(t,e){void 0===e&&(e={}),this.appContainer=t,this.options=l({},Oe,e),this.pathRegistry=new ye,this.componentManagerStore={}}var e=t.prototype;return e.register=function(t,e){var n=l({},this.options,e),r=new Ee(t,n,this.appContainer);if(this.componentManagerStore[r.fullPath])throw Error("Try to register component to an existing path: "+r.fullPath);return(this.componentManagerStore[r.fullPath]=r).enhanceComponentInstance(function(t){t.options.reducer&&he.func(t.options.reducer)&&this.appContainer.reducerRegistry.register(t.options.reducer.bind(t.componentInstance),{initState:t.initState,path:t.fullPath,namespace:t.namespace,persistState:t.persistState,allowedIncomingMulticastActionTypes:t.allowedIncomingMulticastActionTypes});t.options.saga&&he.func(t.options.saga)&&this.appContainer.sagaRegistry.register(t.options.saga.bind(t.componentInstance),{path:t.fullPath,namespace:t.namespace,allowedIncomingMulticastActionTypes:t.allowedIncomingMulticastActionTypes})}.bind(this),Ae.bind(this)),this.appContainer.namespaceRegistry.registerComponentManager(r),r},e.deregister=function(t){var e=t[Se];e&&Ae.call(this,e)},e.destroy=function(){Object.values(this.componentManagerStore).map(function(t){return t.destroy()})},t}();function Ae(t){t.options.reducer&&he.func(t.options.reducer)&&this.appContainer.sagaRegistry.deregister(t.fullPath),t.options.saga&&he.func(t.options.saga)&&this.appContainer.reducerRegistry.deregister(t.fullPath),this.appContainer.namespaceRegistry.deregisterComponentManager(t)}var ke=Symbol("@@"+ae()+"/INIT_STATE"),Ce=Symbol("@@"+ae()+"/EMPTY_STATE"),je=Object.freeze({INIT_STATE:ke,EMPTY_STATE:Ce}),Pe="io.github.t83714/"+ae()+"/ReducerRegistry";function Re(t){return!0==(null!=(e=t)&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(t);var e}var Ie=function(t){var e,n;return!1!==Re(t)&&("function"==typeof(e=t.constructor)&&(!1!==Re(n=e.prototype)&&!1!=n.hasOwnProperty("isPrototypeOf")))},Te=Object.prototype.hasOwnProperty;function Le(t){if(Ne(t))return!1;if(!t)return!0;if(De(t)&&0===t.length)return!0;if(Me(t))return!1;for(var e in t)if(Te.call(t,e))return!1;return!0}function Ne(t){return"number"==typeof t}function Me(t){return"string"==typeof t}function De(t){return Array.isArray(t)}function Fe(t,e){for(var n in e)Te.call(e,n)&&(t[n]=e[n]);return t}function ze(t){var e=parseInt(t);return""+e===t?e:t}function Ue(t,e,n){return null==t?e?n?[]:{}:t:De(t)?t.slice():Fe({},t)}function Ge(t,e){if(t!==e&&Ie(t)&&Ie(e)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e.hasOwnProperty(r)?Ge(t[r],e[r]):t[r]);for(r in e)e.hasOwnProperty(r)&&(n[r]=Ge(t[r],e[r]));return n}return e}function qe(t,e,n,r){if(Ne(n)&&(n=[n]),Le(n))return e;if(Me(n))return qe(t,e,n.split(".").map(ze),r);var i=n[0];return t&&t!==e||(t=Ue(e,!0,Ne(i))),1===n.length?r(t,i):(null!=e&&(e=e[i]),t[i]=qe(t[i],e,n.slice(1),r),t)}var Be={set:function(t,e,n,r){return Le(n)?r:qe(t,e,n,function(t,e){return t[e]=r,t})},update:function(t,e,n,r){return Le(n)?r(Ue(e)):qe(t,e,n,function(t,e){return t[e]=r(t[e]),t})},push:function(t,e,n){var r=Array.prototype.slice.call(arguments,3);return Le(n)?De(e)?e.concat(r):r:qe(t,e,n,function(t,e){return t[e]=De(t[e])?t[e].concat(r):r,t})},insert:function(t,e,i,o,a){if(a=~~a,Le(i)){if(!De(e))return[o];var n=e.slice(0,a);return n.push(o),n.concat(e.slice(a))}return qe(t,e,i,function(t,e){var n=t[e];if(!De(n)){if(null!=n&&void 0!==n)throw Error("Expected "+i+"to be an array. Instead got "+typeof i);n=[]}var r=n.slice(0,a);return r.push(o),t[e]=r.concat(n.slice(a)),t})},del:function(t,e,n){if(!Le(n))return qe(t,e,n,function(t,e){return Array.isArray(t)?void 0!==t[e]&&t.splice(e,1):t.hasOwnProperty(e)&&delete t[e],t})},assign:function(t,e,n,r){return Le(n)?Le(r)?e:Fe(Ue(e),r):qe(t,e,n,function(t,e){r=Object(r);var n=Ue(t[e],!0);return Fe(n,r),t[e]=n,t})},merge:function(t,e,n,r){return Le(n)?Le(r)?e:Ge(e,r):qe(t,e,n,function(t,e){return t[e]=Ge(t[e],r=Object(r)),t})}},He=Object.keys(Be).reduce(function(t,e){return t[e]=Be[e].bind(null,null),t},function(n){var r=n,i=!1,o=Object.keys(Be).reduce(function(t,e){return"function"==typeof Be[e]&&(t[e]=function(){var t=[r,n].concat(Array.prototype.slice.call(arguments));if(i)throw Error("Cannot call "+e+" after `value`");return r=Be[e].apply(null,t),o}),t},{});return o.value=function(){return i=!0,r},o});var Ye=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},Ke="object"==typeof self&&self&&self.Object===Object&&self,Xe="object"==typeof r&&r&&r.Object===Object&&r||Ke||Function("return this")(),$e=Xe.Symbol,Je=Object.prototype,Ve=Je.hasOwnProperty,We=Je.toString,Qe=$e?$e.toStringTag:void 0;var Ze=function(t){var e=Ve.call(t,Qe),n=t[Qe];try{t[Qe]=void 0}catch(t){}var r=We.call(t);return e?t[Qe]=n:delete t[Qe],r},tn=Object.prototype.toString;var en=function(t){return tn.call(t)},nn=$e?$e.toStringTag:void 0;var rn=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":nn&&nn in Object(t)?Ze(t):en(t)};var on=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var an,cn=function(t){if(!on(t))return!1;var e=rn(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},sn=Xe["__core-js_shared__"],un=(an=/[^.]+$/.exec(sn&&sn.keys&&sn.keys.IE_PROTO||""))?"Symbol(src)_1."+an:"";var fn=function(t){return!!un&&un in t},ln=Function.prototype.toString;var pn=function(t){if(null!=t){try{return ln.call(t)}catch(t){}try{return t+""}catch(t){}}return""},hn=/^\[object .+?Constructor\]$/,dn=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var vn=function(t){return!(!on(t)||fn(t))&&(cn(t)?dn:hn).test(pn(t))};var yn=function(t,e){return null==t?void 0:t[e]};var gn=function(t,e){var n=yn(t,e);return vn(n)?n:void 0},mn=gn(Object,"create");var bn=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},wn=Object.prototype.hasOwnProperty;var xn=function(t){var e=this.__data__;if(mn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return wn.call(e,t)?e[t]:void 0},Sn=Object.prototype.hasOwnProperty;var En=function(t){var e=this.__data__;return mn?void 0!==e[t]:Sn.call(e,t)};var On=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=mn&&void 0===e?"__lodash_hash_undefined__":e,this};function _n(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_n.prototype.clear=function(){this.__data__=mn?mn(null):{},this.size=0},_n.prototype.delete=bn,_n.prototype.get=xn,_n.prototype.has=En,_n.prototype.set=On;var An=_n;var kn=function(t,e){return t===e||t!=t&&e!=e};var Cn=function(t,e){for(var n=t.length;n--;)if(kn(t[n][0],e))return n;return-1},jn=Array.prototype.splice;var Pn=function(t){var e=this.__data__,n=Cn(e,t);return 0<=n&&(n==e.length-1?e.pop():jn.call(e,n,1),--this.size,!0)};var Rn=function(t){var e=this.__data__,n=Cn(e,t);return n<0?void 0:e[n][1]};var In=function(t){return-1<Cn(this.__data__,t)};var Tn=function(t,e){var n=this.__data__,r=Cn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Ln(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ln.prototype.clear=function(){this.__data__=[],this.size=0},Ln.prototype.delete=Pn,Ln.prototype.get=Rn,Ln.prototype.has=In,Ln.prototype.set=Tn;var Nn=Ln,Mn=gn(Xe,"Map");var Dn=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Fn=function(t,e){var n=t.__data__;return Dn(e)?n["string"==typeof e?"string":"hash"]:n.map};var zn=function(t){var e=Fn(this,t).delete(t);return this.size-=e?1:0,e};var Un=function(t){return Fn(this,t).get(t)};var Gn=function(t){return Fn(this,t).has(t)};var qn=function(t,e){var n=Fn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Bn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Bn.prototype.clear=function(){this.size=0,this.__data__={hash:new An,map:new(Mn||Nn),string:new An}},Bn.prototype.delete=zn,Bn.prototype.get=Un,Bn.prototype.has=Gn,Bn.prototype.set=qn;var Hn=Bn;var Yn=function(t){return this.__data__.has(t)};function Kn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Kn.prototype.has=Yn;var Xn=Kn;var $n=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var Jn=function(t){return t!=t};var Vn=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var Wn=function(t,e,n){return e==e?Vn(t,e,n):$n(t,Jn,n)};var Qn=function(t,e){return!(null==t||!t.length)&&-1<Wn(t,e,0)};var Zn=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1};var tr=function(e){return function(t){return e(t)}};var er=function(t,e){return t.has(e)},nr=Math.min;var rr=function(t,e,n){for(var r=n?Zn:Qn,i=t[0].length,o=t.length,a=o,c=Array(o),s=1/0,u=[];a--;){var f=t[a];a&&e&&(f=Ye(f,tr(e))),s=nr(f.length,s),c[a]=n||!e&&(i<120||f.length<120)?void 0:new Xn(a&&f)}f=t[0];var l=-1,p=c[0];t:for(;++l<i&&u.length<s;){var h=f[l],d=e?e(h):h;if(h=n||0!==h?h:0,!(p?er(p,d):r(u,d,n))){for(a=o;--a;){var v=c[a];if(!(v?er(v,d):r(t[a],d,n)))continue t}p&&p.push(d),u.push(h)}}return u};var ir=function(t){return t};var or=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},ar=Math.max;var cr=function(o,a,c){return a=ar(void 0===a?o.length-1:a,0),function(){for(var t=arguments,e=-1,n=ar(t.length-a,0),r=Array(n);++e<n;)r[e]=t[a+e];e=-1;for(var i=Array(a+1);++e<a;)i[e]=t[e];return i[a]=c(r),or(o,this,i)}};var sr=function(t){return function(){return t}},ur=function(){try{var t=gn(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),fr=Date.now;var lr=function(n){var r=0,i=0;return function(){var t=fr(),e=16-(t-i);if(i=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}(ur?function(t,e){return ur(t,"toString",{configurable:!0,enumerable:!1,value:sr(e),writable:!0})}:ir);var pr=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991};var hr=function(t){return null!=t&&pr(t.length)&&!cn(t)};var dr=function(t){return null!=t&&"object"==typeof t};var vr=function(t){return dr(t)&&hr(t)};var yr=function(t){return vr(t)?t:[]},gr=function(t,e){return lr(cr(t,e,ir),t+"")}(function(t){var e=Ye(t,yr);return e.length&&e[0]===t[0]?rr(e):[]}),mr={initState:{},persistState:!1};function br(t,e,n){if(!he.action(n))return e;var r,i,o,a,c=e;switch(n.type){case ke:c=function(t,e){var n=e.payload,r=n.data,i=n.persistState,o=n.path.split("/"),a=i;if(be.has(t,o)&&a){var c=be.get(t,o);if(gr(Object.keys(c),Object.keys(r)).length)return t}return He.assign(t,o,r)}(c,n);break;case Ce:r=c,o=(i=n.payload).data,a=i.path.split("/"),c=He.update(r,a,function(e){return Object.keys(o).forEach(function(t){delete e[t]}),e})}return c=function(o,a){var c=this;if(!he.namespacedAction(a))return o;var t=this.pathRegistry.searchDispatchPaths(a);if(!t||!t.length)return o;var s=o;return t.forEach(function(t){var e=c.reducerStore[t].reducer;if(e&&"function"==typeof e){var n=t.split("/"),r=be.get(o,n),i=e(r,a);r!==i&&(s=He.assign(s,n,i))}}),s}.call(this,c,n),t&&"function"==typeof t&&(c=t(c,n)),c}var wr=function(){function t(t){this.appContainer=t,this.reducerStore={},this.pathRegistry=new ye,this.appContainer.actionRegistry.register(Pe,je)}var e=t.prototype;return e.createGlobalReducer=function(t){return void 0===t&&(t=null),br.bind(this,t)},e.register=function(t,e){if(!t||"function"!=typeof t)throw Error("Failed to register reducer: invalid reducer parameter.");e||(e=l({},mr));var n=e.path,r=e.namespace,i=e.initState,o=e.persistState,a=e.allowedIncomingMulticastActionTypes;if(!n)throw Error("Failed to register namespaced reducer: namespace path cannot be empty!");var c=me(n),s=r?c.lastIndexOf(r):c.length;if(null===this.pathRegistry.add(c,{localPathPos:s,namespace:r,allowedIncomingMulticastActionTypes:a}))throw Error("Failed to register namespaced reducer: given path `"+c+"` has been registered.");this.reducerStore[c]=l({},e,{reducer:t,initState:i,persistState:o,allowedIncomingMulticastActionTypes:a,path:c}),function(t,e,n){if(!this.appContainer.store)throw Error("Failed to set init state for component reducer: redux store not available yet!");this.appContainer.store.dispatch((r=t,i=e,o=n,{type:ke,namespace:Pe,payload:{path:r,data:i,persistState:o}}));var r,i,o}.call(this,c,i,o)},e.deregister=function(t){var e=me(t);this.pathRegistry.remove(e);var n=this.reducerStore[e];n&&(delete this.reducerStore[e],n.persistState||function(t,e){if(!this.appContainer.store)throw Error("Failed to set init state for component reducer: redux store not available yet!");this.appContainer.store.dispatch((n=t,r=e,{type:Ce,namespace:Pe,payload:{path:n,data:r}}));var n,r}.call(this,e,n.initState))},t}();var xr=i(function(R){!function(t){var s,e=Object.prototype,u=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a=t.regeneratorRuntime;if(a)R.exports=a;else{(a=t.regeneratorRuntime=R.exports).wrap=m;var f="suspendedStart",l="suspendedYield",p="executing",h="completed",d={},c={};c[i]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==e&&u.call(y,i)&&(c=y);var g=S.prototype=w.prototype=Object.create(c);x.prototype=g.constructor=S,S.constructor=x,S[o]=x.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{__await:t}},E(O.prototype),O.prototype[r]=function(){return this},a.AsyncIterator=O,a.async=function(t,e,n,r){var i=new O(m(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(g),g[o]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),c=u.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}!i||"break"!==t&&"continue"!==t||e<i.tryLoc||i.finallyLoc<e||(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),d}}}function m(t,e,n,r){var o,a,c,s,i=Object.create((e&&e.prototype instanceof w?e:w).prototype),u=new C(r||[]);return i._invoke=(o=t,a=n,c=u,s=f,function(t,e){if(s===p)throw Error("Generator is already running");if(s===h){if("throw"===t)throw e;return P()}for(c.method=t,c.arg=e;;){var n=c.delegate;if(n){var r=_(n,c);if(r){if(r===d)continue;return r}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(s===f)throw s=h,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);s=p;var i=b(o,a,c);if("normal"===i.type){if(s=c.done?h:l,i.arg===d)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(s=h,c.method="throw",c.arg=i.arg)}}),i}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function x(){}function S(){}function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(s){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var o=b(s[t],s,n);if("throw"!==o.type){var a=o.arg,c=a.value;return c&&"object"==typeof c&&u.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(c).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function _(t,e){var n=t.iterator[e.method];if(n===s){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=s,_(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=b(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=s),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:s,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())}),Sr=function(){return this||"object"==typeof self&&self}()||Function("return this")(),Er=Sr.regeneratorRuntime&&0<=Object.getOwnPropertyNames(Sr).indexOf("regeneratorRuntime"),Or=Er&&Sr.regeneratorRuntime;Sr.regeneratorRuntime=void 0;var _r=xr;if(Er)Sr.regeneratorRuntime=Or;else try{delete Sr.regeneratorRuntime}catch(t){Sr.regeneratorRuntime=void 0}var Ar=_r,kr=Symbol("@@"+ae()+"/INIT_SAGA"),Cr=Symbol("@@"+ae()+"/CANCEL_SAGA"),jr=Object.freeze({INIT_SAGA:kr,CANCEL_SAGA:Cr}),Pr="io.github.t83714/"+ae()+"/SagaRegistry",Rr=function(){function t(t){void 0===t&&(t=null),this.buffer=t||W(),this.eventEmitters=[]}var e=t.prototype;return e.subscribe=function(t){this.unsubscribe(t),this.eventEmitters.push(t)},e.unsubscribe=function(e){this.eventEmitters=this.eventEmitters.filter(function(t){return t!==e})},e.dispatch=function(e){this.eventEmitters.forEach(function(t){return t(e)})},e.destroy=function(){this.eventEmitters=[]},e.create=function(t){var e=this;return dt(function(t){return e.subscribe(t),function(){e.unsubscribe(t)}},this.buffer)},t}();function Ir(t,e){return Lt(t.chan,e)}function Tr(t,e,n){void 0===n&&(n="");var r=new ve(t.path).convertNamespacedAction(e,n),i=this.appContainer.actionRegistry.findNamespaceByActionType(r.type);return i?r.namespace=i:ce("Cannot locate namespace for Action `"+newAction.type+"`: `"+newAction.type+"` needs to be registered otherwise the action won't be serializable."),Nt(r)}var Lr=function(n,r,i){for(var t=arguments.length,o=Array(3<t?t-3:0),e=3;e<t;e++)o[e-3]=arguments[e];return Ft(Ar.mark(function t(){var e;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ir(n,r);case 3:return e=t.sent,t.next=6,Ft.apply(void 0,[i].concat(o.concat(e)));case 6:t.next=0;break;case 8:case"end":return t.stop()}},t,this)}))},Nr=Object.freeze({take:Ir,put:Tr,select:function(t,n){for(var e=arguments.length,r=Array(2<e?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var o=t.path.split("/");return function(t){void 0===t&&(t=C);for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Tt(Rt,{selector:t,args:n})}(function(t){var e=be.get(t,o);return n&&he.func(n)?n.apply(void 0,[e].concat(r)):e})},takeEvery:Lr,takeLatest:function(r,i,o){for(var t=arguments.length,a=Array(3<t?t-3:0),e=3;e<t;e++)a[e-3]=arguments[e];return Ft(Ar.mark(function t(){var e,n;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ir(r,i);case 3:if(n=t.sent,e)return t.next=7,cancel(e);t.next=7;break;case 7:return t.next=9,Ft.apply(void 0,[o].concat(a.concat(n)));case 9:e=t.sent,t.next=0;break;case 12:case"end":return t.stop()}},t,this)}))},takeLeading:function(n,r,i){for(var t=arguments.length,o=Array(3<t?t-3:0),e=3;e<t;e++)o[e-3]=arguments[e];return Ft(Ar.mark(function t(){var e;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ir(n,r);case 3:return e=t.sent,t.next=6,Dt.apply(void 0,[i].concat(o.concat(e)));case 6:t.next=0;break;case 8:case"end":return t.stop()}},t,this)}))},throttle:function(r,i,t,o){for(var e=arguments.length,a=Array(4<e?e-4:0),n=4;n<e;n++)a[n-4]=arguments[n];return Ft(Ar.mark(function t(){var n,e;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dt(ht,V(1,3));case 2:return n=t.sent,t.next=5,Lr(r,"*",Ar.mark(function t(e){return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nt(n,e);case 2:case"end":return t.stop()}},t,this)}));case 5:return t.next=8,Lt(n);case 8:return e=t.sent,t.next=11,Ft.apply(void 0,[o].concat(a,[e]));case 11:return t.next=13,Gt(i);case 13:t.next=5;break;case 15:case"end":return t.stop()}},t,this)}))},actionChannel:function(e,i,o){return Dt(Ar.mark(function t(){var n,r;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.chan,t.next=3,Dt(ht,o);case 3:return r=t.sent,t.prev=4,t.next=7,Ft(Ar.mark(function t(){var e;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ir(n,i);case 3:return e=t.sent,t.next=6,Tr(r,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},t,this)}));case 7:return t.prev=7,r&&r.close(),t.finish(7);case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}},t,this,[[4,,7,10]])}))}}),Mr=Ar.mark(qr),Dr=Ar.mark(Hr),Fr=Ar.mark(Yr),zr=Ar.mark(Kr),Ur=Ar.mark(Xr),Gr=Ar.mark($r);function qr(){return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft([this,Hr]);case 2:return t.next=4,Ft([this,Br]);case 4:case"end":return t.stop()}},Mr,this)}var Br=Ar.mark(function t(){return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ut(function(t){return he.namespacedAction(t)},Ar.mark(function t(e){var n,r,i;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.pathRegistry.searchDispatchPaths(e))&&n.length){t.next=3;break}return t.abrupt("return");case 3:r=0;case 4:if(r>=n.length){t.next=13;break}if((i=this.namespacedSagaItemStore[n[r]])&&i.chan){t.next=8;break}return t.abrupt("continue",10);case 8:return t.next=10,Nt(i.chan,e);case 10:r++,t.next=4;break;case 13:case"end":return t.stop()}},t,this)}).bind(this));case 2:case"end":return t.stop()}},t,this)});function Hr(){var e,n;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dt([this.hostSagaCommandChan,this.hostSagaCommandChan.create]);case 3:e=t.sent;case 4:return t.next=7,Lt(e);case 7:return n=t.sent,t.next=10,Ft([this,Yr],n);case 10:t.next=4;break;case 12:return t.prev=12,t.next=15,Tt(It,{});case 15:if(!t.sent){t.next=18;break}ce("Terminating Global Host Saga Command Channel."),e.close();case 18:return t.finish(12);case 19:case"end":return t.stop()}},Dr,this,[[0,,12,19]])}function Yr(e){var n,r;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.payload,t.t0=n=e.type,t.next=t.t0===kr?4:t.t0===Cr?7:10;break;case 4:return t.next=6,Dt([this,Kr],r);case 6:return t.abrupt("break",11);case 7:return t.next=9,Dt([this,$r],r);case 9:return t.abrupt("break",11);case 10:throw Error("Unknown host command action: "+n);case 11:case"end":return t.stop()}},Fr,this)}function Kr(e){var n,r,i,o,a,c,s,u,f=this;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.saga,r=e.namespace,i=e.allowedIncomingMulticastActionTypes,o=me(e.path)){t.next=6;break}return t.next=5,Dt([this,Xr],n);case 5:return t.abrupt("return");case 6:if(a=r?o.lastIndexOf(r):o.length,null===this.pathRegistry.add(o,{localPathPos:a,namespace:r,allowedIncomingMulticastActionTypes:i}))throw Error("Failed to register namespaced saga: given path `"+o+"` has been registered.");t.next=9;break;case 9:return t.next=11,Dt(vt);case 11:return c=l({},e,{chan:t.sent,path:o,allowedIncomingMulticastActionTypes:i}),s={},Object.keys(Nr).forEach(function(t){s[t]=Nr[t].bind(f,c)}),t.next=17,Ft(Ar.mark(function t(){return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dt(n,s);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),ce("Error thrown from saga registered at `"+o+"`: ","error",t.t0);case 8:case"end":return t.stop()}},t,this,[[0,5]])}));case 17:u=l({},c,{task:t.sent}),this.namespacedSagaItemStore[o]=u;case 20:case"end":return t.stop()}},zr,this)}function Xr(e){return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(Ar.mark(function t(){return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dt(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),ce("Error thrown from registered global saga: ","error",t.t0);case 8:case"end":return t.stop()}},t,this,[[0,5]])}));case 2:this.globalSagaTaskList.push(t.sent);case 4:case"end":return t.stop()}},Ur,this)}function $r(e){var n,r,i=this;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=12;break}if(n=me(e),this.pathRegistry.remove(n),r=this.namespacedSagaItemStore[n]){t.next=6;break}return t.abrupt("return");case 6:return delete this.namespacedSagaItemStore[n],r.chan.close(),t.next=10,zt(r.task);case 10:t.next=16;break;case 12:return Object.keys(this.namespacedSagaItemStore).forEach(function(t){i.namespacedSagaItemStore[t].task===e&&delete i.namespacedSagaItemStore[t]}),this.globalSagaTaskList=this.globalSagaTaskList.filter(function(t){return t!==e}),t.next=16,zt(e);case 16:case"end":return t.stop()}},Gr,this)}var Jr=function(){function t(t){this.appContainer=t,this.namespacedSagaItemStore={},this.globalSagaTaskList=[],this.pathRegistry=new ye,this.hostSagaCommandChan=new Rr(W()),this.appContainer.actionRegistry.register(Pr,jr)}var e=t.prototype;return e.createHostSaga=function(){return qr.bind(this)},e.register=function(t,e){if(!t||"function"!=typeof t)throw Error("SagaRegistry::register: saga parameter cannot be empty!");var n=l({saga:t},he.object(e)?e:{});this.hostSagaCommandChan.dispatch({type:kr,namespace:Pr,payload:n})},e.deregister=function(t){if(!t)throw Error("SagaRegistry::deregister: pathOrTask parameter cannot be empty!");this.hostSagaCommandChan.dispatch({type:Cr,namespace:Pr,payload:t})},t}(),Vr=function(e){var n={};if(he.symbol(e))n[e+""]=e;else if(he.array(e)&&e.length)e.forEach(function(t){if(!he.symbol(t))throw Error("ActionRegistry: Action type must be a symbol.");n[t+""]=t});else{if(!he.object(e))throw Error("ActionRegistry: actionTypes must be a symbol or a list / array of symbols.");Object.keys(e).forEach(function(t){if(!he.symbol(e[t]))throw Error("ActionRegistry: Action type must be a symbol.");n[e[t]+""]=e[t]})}return n},Wr=function(){function t(){this.pathRegistry=new ye}var e=t.prototype;return e.register=function(t,e){t=me(t);var n=Vr(e);if(this.pathRegistry.exist(t)){var r=this.pathRegistry.getPathData(t),i=Object.assign({},he.object(r.actionList)?r.actionList:{},n);this.pathRegistry.setPathData(t,l({},r,{actionList:i}))}else this.pathRegistry.add(t,{actionList:n})},e.deregister=function(t,e){if(void 0===e&&(e=null),t=me(t),this.pathRegistry.exist(t))if(e){var n=Object.values(Vr(e)),r=this.pathRegistry.getPathData(t).actionList,i=Object.keys(r).filter(function(t){return-1==n.indexOf(r[t])});i.length?(i.forEach(function(t){delete r[t]}),this.pathRegistry.setPathData({actionList:r})):this.pathRegistry.remove(t)}else this.pathRegistry.remove(t)},e.findNamespaceByActionType=function(e){return this.pathRegistry.searchPathByPathData(function(t){return-1!=Object.values(t.actionList).indexOf(e)})},e.serialiseAction=function(t){if(!he.action(t))throw Error("serialiseAction: Cannot action parameter is not a valid Action.");var e=t.namespace,n=t.type;if(!e)throw Error("serialiseAction: Cannot locate namespace property from action parameter");var r=this.pathRegistry.getPathData(e).actionList;if(!he.object(r)||!Object.keys(r).length||-1===!Object.values(r).indexOf(t))throw Error("serialiseAction: the action type is not register yet.");var i=l({},t,{type:n+""});return!0===t[Qt]&&(i[Qt+""]=!0),JSON.stringify(i)},e.deserialiseAction=function(t){var e=JSON.parse(t);if(!e||!e.namespace)throw Error("Cannot deserialise action without namespace property!");!0===e[Qt+""]&&(e[Qt]=!0);var n=this.pathRegistry.getPathData(e.namespace).actionList;if(!he.object(n))throw Error("Cannot deserialise unregistered action!");var r=n[e.type];if(!r)throw Error("Cannot deserialise unregistered action!");return e.type=r,e},t}(),Qr=function(){function t(t){this.appContainer=t,this.pathRegistry=new ye}var e=t.prototype;return e.registerComponentManager=function(t){var e=t.namespace,n=t.options,r=n.namespaceInitCallback,i=n.namespaceDestroyCallback,o=n.actionTypes;this.pathRegistry.exist(e)?this.pathRegistry.getPathData(e).cmList.push(t):(o&&this.appContainer.actionRegistry.register(e,o),this.pathRegistry.add(e,{cmList:[t],namespaceData:he.func(r)?r():{},namespaceInitCallback:r,namespaceDestroyCallback:i,actionTypes:o}))},e.deregisterComponentManager=function(e){var t=e.namespace,n=this.pathRegistry.getPathData(t),r=n.cmList,i=n.namespaceDestroyCallback,o=n.namespaceData;(r=r.filter(function(t){return t!==e})).length||(this.pathRegistry.remove(t),this.appContainer.actionRegistry.deregister(t),he.func(i)&&i(o))},e.foreach=function(n){this.pathRegistry.foreach(function(t,e){return n(t.namespaceData,e)})},e.map=function(n){this.pathRegistry.map(function(t,e){return n(t.namespaceData,e)})},t}(),Zr=Object.keys(je).map(function(t){return je[t]}).concat(Object.keys(jr).map(function(t){return jr[t]})),ti={reducer:null,initState:{},middlewares:[],reduxDevToolsDevOnly:!0,devToolOptions:l({},{actionSanitizer:function(t){return l({},t,{type:t.type+""})},predicate:function(t,e){return e&&-1==Zr.indexOf(e.type)}}),sagaMiddlewareOptions:{},isServerSideRendering:!1},ei=function(){function t(t){void 0===t&&(t={}),this.store=null,this.actionRegistry=new Wr,this.namespaceRegistry=new Qr(this);var e=l({},ti,t),n=function(t,e){if("object"!=typeof window||!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)return m;if(t)return m;var n=l({},e||{});return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(n)}(e.reduxDevToolsDevOnly,e.devToolOptions),r=Jt(e.sagaMiddlewareOptions),i=e.middlewares.concat([r]);this.eventEmitters=[],this.componentRegistry=new _e(this,{isServerSideRendering:e.isServerSideRendering}),this.reducerRegistry=new wr(this),this.sagaRegistry=new Jr(this),this.store=y(this.reducerRegistry.createGlobalReducer(e.reducer),l({},e.initState),n(function(){for(var t=arguments.length,s=Array(t),e=0;e<t;e++)s[e]=arguments[e];return function(c){return function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=c.apply(void 0,e),i=function(){throw Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=s.map(function(t){return t(o)});return i=m.apply(void 0,a)(r.dispatch),u({},r,{dispatch:i})}}}.apply(void 0,i))),this.hostSagaTask=r.run(this.sagaRegistry.createHostSaga())}var e=t.prototype;return e.registerComponent=function(t,e){return this.componentRegistry.register(t,e)},e.deregisterComponent=function(t){this.componentRegistry.deregister(t)},e.destroy=function(){this.componentRegistry.destroy()},t}(),ni="__appContainer",ri=null;function ii(t){if(void 0===t&&(t={}),ri)return ce("AppContainerUtils.createAppContainer: Existing appContainer found. The appContainer options supplied was ignored. Existing appContainer will be used.","warn"),ri;var e=new ei(t);return ri=e}function oi(t){if(void 0===t&&(t=null),t){if(t.props&&t.props[ni])return t.props[ni];if(t.context&&t.context[ni])return t.context[ni]}return ri||(ri=ii()),ri}function ai(t,e){return oi(t).registerComponent(t,e)}var ci=Object.freeze({createAppContainer:ii,getAppContainer:oi,registerComponent:ai,deregisterComponent:function(t){return oi(t).deregisterComponent(t)},registerSaga:function(t,e,n){return void 0===n&&(n=null),oi(n).sagaRegistry.register(t,e)},deregisterSaga:function(t,e){return void 0===e&&(e=null),oi(e).sagaRegistry.deregister(t)},registerReducer:function(t,e,n){return void 0===n&&(n=null),oi(n).reducerRegistry.register(t,e)},deregisterReducer:function(t,e){return void 0===e&&(e=null),oi(e).reducerRegistry.deregister(t)},registerActions:function(t,e,n){return void 0===n&&(n=null),oi(n).actionRegistry.register(t,e)},serialiseAction:function(t,e){return void 0===e&&(e=null),oi(e).actionRegistry.serialiseAction(t)},deserialiseAction:function(t,e){return void 0===e&&(e=null),oi(e).actionRegistry.deserialiseAction(t)},findNamespaceByActionType:function(t,e){return void 0===e&&(e=null),oi(e).actionRegistry.findNamespaceByActionType(t)},destroyAppContainer:function(t){void 0===t&&(t=null);var e=oi(t);e.destroy(),e===ri&&(ri=null)},updateAppContainerRetrieveKey:function(t){var e=ni;return ni=t,e}});var si=function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e};var ui=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},fi=Ar.mark(pi),li=function(n){function t(t){var e;return(e=n.call(this,t)||this).appContainer=oi(),e.componentManager=ai(ui(ui(e)),{namespace:"io.github.t83714/ActionForwarder",saga:pi.bind(ui(ui(e))),allowedIncomingMulticastActionTypes:"*"}),e}return si(t,n),t.prototype.render=function(){return null},t}(e.Component);function pi(i){return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.takeEvery(this.props.pattern?this.props.pattern:"*",Ar.mark(function t(e){var n,r;return Ar.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentSenderPath===this.componentManager.fullPath)return t.abrupt("return");t.next=2;break;case 2:if(n=hi(e,this.props.transformer),!0!==this.props.toGlobal){t.next=13;break}if(this.props.absoluteDispatchPath)return t.next=7,Nt(l({},n,{type:this.props.absoluteDispatchPath+"/"+n.type}));t.next=9;break;case 7:t.next=11;break;case 9:return t.next=11,Nt(n);case 11:t.next=16;break;case 13:return r=this.props.relativeDispatchPath?"../../../"+this.props.relativeDispatchPath:"",t.next=16,i.put(n,r);case 16:case"end":return t.stop()}},t,this)}).bind(this));case 2:case"end":return t.stop()}},fi,this)}function hi(t,e){if(!e)return t;var n=t;return he.symbol(e)?n=l({},t,{type:e}):he.func(e)&&(n=e(t)),n}li.propTypes={namespacePrefix:n.string.isRequired,pattern:n.oneOfType([n.symbol,n.func,n.arrayOf(n.oneOfType([n.string,n.func]))]),toGlobal:n.bool,absoluteDispatchPath:n.string,relativeDispatchPath:n.string,transformer:n.oneOfType([n.symbol,n.func])},t.AppContainer=ei,t.AppContainerUtils=ci,t.ActionForwarder=li,t.utils=de,Object.defineProperty(t,"__esModule",{value:!0})});
