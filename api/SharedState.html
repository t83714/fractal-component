
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>SharedState Â· fractal-component</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Jacky Jiang (https://github.com/t83714)">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="AppContainer.html" />
    
    
    <link rel="prev" href="ManageableComponentOptions.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Table of Contents</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="ComponentManager.html">
            
                <a href="ComponentManager.html">
            
                    
                    ComponentManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="useComponentManager.html">
            
                <a href="useComponentManager.html">
            
                    
                    useComponentManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="ManageableComponentOptions.html">
            
                <a href="ManageableComponentOptions.html">
            
                    
                    ManageableComponentOptions
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.4" data-path="SharedState.html">
            
                <a href="SharedState.html">
            
                    
                    SharedState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="AppContainer.html">
            
                <a href="AppContainer.html">
            
                    
                    AppContainer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="ActionForwarder.html">
            
                <a href="ActionForwarder.html">
            
                    
                    ActionForwarder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="utils.html">
            
                <a href="utils.html">
            
                    
                    utils
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="AppContainerUtils.html">
            
                <a href="AppContainerUtils.html">
            
                    
                    AppContainerUtils
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../CHANGES.html">
            
                <a href="../../CHANGES.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Introduction/BeginnerTutorial/">
            
                <a href="../Introduction/BeginnerTutorial/">
            
                    
                    Beginner Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../Introduction/BeginnerTutorial/Overview.html">
            
                <a href="../Introduction/BeginnerTutorial/Overview.html">
            
                    
                    1. Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../Introduction/BeginnerTutorial/InitialSetup.html">
            
                <a href="../Introduction/BeginnerTutorial/InitialSetup.html">
            
                    
                    2. InitialSetup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../Introduction/BeginnerTutorial/RandomGif/">
            
                <a href="../Introduction/BeginnerTutorial/RandomGif/">
            
                    
                    3. RandomGif
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../Introduction/BeginnerTutorial/RandomGif/GetStarted.html">
            
                <a href="../Introduction/BeginnerTutorial/RandomGif/GetStarted.html">
            
                    
                    3.1 Get Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../Introduction/BeginnerTutorial/RandomGif/Namespace.html">
            
                <a href="../Introduction/BeginnerTutorial/RandomGif/Namespace.html">
            
                    
                    3.2 Namespace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="../Introduction/BeginnerTutorial/RandomGif/NamespacedState.html">
            
                <a href="../Introduction/BeginnerTutorial/RandomGif/NamespacedState.html">
            
                    
                    3.3 A simple Switch / Namespaced State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4" data-path="../Introduction/BeginnerTutorial/RandomGif/NamespacedSaga.html">
            
                <a href="../Introduction/BeginnerTutorial/RandomGif/NamespacedSaga.html">
            
                    
                    3.4 Request GIF / Namespaced Saga
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.5" data-path="../Introduction/BeginnerTutorial/RandomGif/ComponentNamespaceData.html">
            
                <a href="../Introduction/BeginnerTutorial/RandomGif/ComponentNamespaceData.html">
            
                    
                    3.5 Styling / Component Namespace Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.6" data-path="../Introduction/BeginnerTutorial/RandomGif/ExternalInterfaces.html">
            
                <a href="../Introduction/BeginnerTutorial/RandomGif/ExternalInterfaces.html">
            
                    
                    3.6 Encapsulation & External Interfaces
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../Introduction/BeginnerTutorial/RandomGifPair/">
            
                <a href="../Introduction/BeginnerTutorial/RandomGifPair/">
            
                    
                    4. RandomGifPair
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../Introduction/BeginnerTutorial/RandomGifPair/GetStarted.html">
            
                <a href="../Introduction/BeginnerTutorial/RandomGifPair/GetStarted.html">
            
                    
                    4.1 Get Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="../Introduction/BeginnerTutorial/RandomGifPair/IncomingOutgoingActions.html">
            
                <a href="../Introduction/BeginnerTutorial/RandomGifPair/IncomingOutgoingActions.html">
            
                    
                    4.2 Incoming / Outgoing Actions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../Introduction/BeginnerTutorial/Conclusion.html">
            
                <a href="../Introduction/BeginnerTutorial/Conclusion.html">
            
                    
                    5. Conclusion
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Basic Concepts
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../BasicConcepts/RecommendedStructure.html">
            
                <a href="../BasicConcepts/RecommendedStructure.html">
            
                    
                    Recommended Component Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <span>
            
                    
                    Component Namespace
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" >
            
                <span>
            
                    
                    Action Dispatch Tree
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" >
            
                <span>
            
                    
                    Symbol Action Type
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" >
            
                <span>
            
                    
                    Component State
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" >
            
                <span>
            
                    
                    Component Reducer
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" >
            
                <span>
            
                    
                    Component Saga
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" >
            
                <span>
            
                    
                    Component Styling
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Advanced Concepts
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" >
            
                <span>
            
                    
                    ActionForwarder
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" >
            
                <span>
            
                    
                    SagaMonitor
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >SharedState</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="sharedstate">SharedState</h2>
<ul>
<li><a href="#overview"><code>Overview</code></a></li>
<li><a href="#define-shared-state"><code>Define Shared State</code></a></li>
<li><a href="#use-shared-state"><code>Use Shared State</code></a></li>
<li><a href="#example-app"><code>Example App</code></a></li>
</ul>
<h3 id="overview">Overview</h3>
<p><code>fractal-component</code> allows you to encapsulate the component state data in a namespace container. However, sometimes, you may want to share state data among encapsulated components. <code>SharedState</code> allows you to define a piece of state data with its own reducer and share it with other components. <code>fractal-component</code> handles the sharing &amp; mapping process in a transparent way. i.e. the shared state data will be mapped into target component local state data automacally as if it was part of the component original state data. In the meantime. there is only one copy of the shared state data stored in the global redux store.</p>
<p>Like component state data, you can only update shared state data via its own namespaced reducer by dispatching action defined in the <code>SharedState</code>&apos;s namespace (i.e. the target component reducer can&apos;t see the shared state data). To make it easier to deliver action to the <code>SharedState</code>&apos;s namespace, if you dispatch an action that defined by the <code>SharedState</code> state without specifying the <a href="ComponentManager.html#dispatch">dispatch path</a>, the action will be delivered to the <code>SharedState</code>&apos;s reducer directly.</p>
<p><code>SharedState</code> requires <code>fractal-component</code> <code>4.3.0</code> or higher.</p>
<h3 id="define-shared-state">Define Shared State</h3>
<p>You can define <code>SharedState</code> by <code>createSharedState()</code> function. </p>
<p>Here is an example:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { createSharedState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;fractal-component&quot;</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> actions <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./actions&quot;</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> actionTypes <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./actions/types&quot;</span>;
<span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./reducers&quot;</span>;

<span class="hljs-keyword">const</span> SharedStateA = createSharedState({
    <span class="hljs-comment">// --- the namespace of the shared state container</span>
    namespace: <span class="hljs-string">&quot;io.github.t83714/SharedStateA&quot;</span>,
    <span class="hljs-comment">// --- all action types defined by the shared state container</span>
    actionTypes,
    <span class="hljs-comment">// --- the shared state reducer</span>
    reducer,
    <span class="hljs-comment">// --- initial state data of the sahred state</span>
    initState: {
        b: <span class="hljs-number">2</span>
    }
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> SharedStateA;
<span class="hljs-keyword">export</span> { actionTypes, actions };
</code></pre>
<h3 id="use-shared-state">Use Shared State</h3>
<p>You can specify SharedState that you want to be mapped into your component when create the component via <a href="ManageableComponentOptions#option-sharedstates">sharedStates</a> option. </p>
<p>Here is an example:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { ComponentManager, AppContainerContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;fractal-component&quot;</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComponentA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);
        <span class="hljs-keyword">this</span>.state = initState();
        <span class="hljs-keyword">this</span>.componentManager = <span class="hljs-keyword">new</span> ComponentManager(<span class="hljs-keyword">this</span>, {
            namespace: <span class="hljs-string">&quot;io.github.t83714/ComponentA&quot;</span>,
            initState: {
                a: <span class="hljs-number">1</span>
            },
            sharedStates: {
                SharedStateA
            }
        });
    }

    render() {
        <span class="hljs-comment">/**
         * this.state will be 
         * {
         *   a: 1,
         *   SharedStateA: {
         *     b: 2
         *   }
         * }
        */</span>
    }
}
ComponentA.contextType = AppContainerContext;
</code></pre>
<p>Or use <code>userComponentManager</code> hook to define a function component:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { useComponentManager } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;fractal-component&quot;</span>;

<span class="hljs-keyword">const</span> ComponentA = props =&gt; {
    <span class="hljs-keyword">const</span> [state, dispatch] = useComponentManager(props, {
        namespace: <span class="hljs-string">&quot;io.github.t83714/ComponentA&quot;</span>,
        initState: {
            a: <span class="hljs-number">1</span>
        },
        sharedStates: {
            SharedStateA
        }
    });

    <span class="hljs-comment">/**
     * state will be 
     * {
     *   a: 1,
     *   SharedStateA: {
     *     b: 2
     *   }
     * }
    */</span>

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createComponentA;
</code></pre>
<h3 id="example-app">Example App</h3>
<p>An example app can be found from <a href="https://github.com/t83714/fractal-component/tree/master/examples/exampleAppSharedState" target="_blank">here</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ManageableComponentOptions.html" class="navigation navigation-prev " aria-label="Previous page: ManageableComponentOptions">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="AppContainer.html" class="navigation navigation-next " aria-label="Next page: AppContainer">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"SharedState","level":"1.2.4","depth":2,"next":{"title":"AppContainer","level":"1.2.5","depth":2,"path":"api/AppContainer.md","ref":"./api/AppContainer.md","articles":[]},"previous":{"title":"ManageableComponentOptions","level":"1.2.3","depth":2,"path":"api/ManageableComponentOptions.md","ref":"./api/ManageableComponentOptions.md","articles":[]},"dir":"ltr"},"config":{"plugins":["ga"],"root":"./","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"ga":{"configuration":"auto","token":"UA-128574696-2"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Jacky Jiang (https://github.com/t83714)","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"intro.md","glossary":"GLOSSARY.md","summary":"README.md"},"variables":{},"title":"fractal-component","gitbook":"*","description":"`fractal-component` is a javascript library that can help you to encapsulate decoupled UI component easily. It aims to provide a one-stop solution that allows state store (redux) management, actions (messages, events) processing & routing, side-effect management and component styling to be encapsulated into one single software module."},"file":{"path":"api/SharedState.md","mtime":"2019-05-07T12:47:59.150Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-05-14T10:53:08.847Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

